---
title:  The AusTraits Plant Dictionary (APD)
subtitle: Extract of APD traits intended for review
author: Elizabeth Wenk on behalf of APD
format:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAWElEQVR42mNgGPTAxsZmJsVqQApgmGw1yApwKcQiT7phRBuCzzCSDSHGMKINIeDNmWQlA2IigKJwIssQkHdINgxfmBBtGDEBS3KCxBc7pMQgMYE5c/AXPwAwSX4lV3pTWwAAAABJRU5ErkJggg==
  html:
    embed-resources: true
    theme: cosmo
    smooth-scroll: true
    toc: true
  pdf:
    documentclass: report
    papersize: A4
    classoption: [onecolumn, portrait]
    toc: true
    geometry:
      - top=30mm
      - left=20mm
      - heightrounded
    fontfamily: libertinus
    colorlinks: false
  docx:
    toc: true
    number-sections: false
    highlight-style: github
    prefer-html: true
date: "2023.03.10"
---

```{r, include=FALSE, message=FALSE, warning=FALSE, echo=FALSE}
simplified <- TRUE

traits <- c("leaf_shape", "leaf_photosynthetic_rate_per_area_ambient", "leaf_photosynthetic_rate_per_area_maximum", "leaf_photosynthetic_rate_per_area_saturated")
```


```{r, include=FALSE, message=FALSE, warning=FALSE, echo=FALSE}
library(knitr)
library(kableExtra)
library(readr)
library(tidyr)
library(dplyr)
library(gt)
library(purrr)

source("R/kable.R")
source("R/helpers.R")
source("R/create_APD_trait_table.R")

APD <- read_csv("data/APD_traits.csv")
hierarchy <- read_csv("data/APD_trait_hierarchy.csv")
classes <- read_csv("data/ontology_links.csv")
reviewers <- read_csv("data/APD_reviewers.csv")
units <- read_csv("data/APD_units.csv")
references <- read_csv("data/APD_references.csv")
categorical_values <- read_csv("data/APD_categorical_values.csv") 

if(knitr::is_html_output()) {
  my_table <- util_kable_styling_html
} else if (knitr::is_latex_output()){
  my_table <- util_kable_styling_pdf
} else {
  my_table <- util_kable_styling_docx
}


```
**Latest version**: https://w3id.org/APD/APD.html
**This version**: https://w3id.org/APD/2023-05-1/APD.html
**Previous version**: https://w3id.org/APD/2023-02-1/APD.html

<!-- Examples:
https://www.w3.org/2009/08/skos-reference/skos.html
https://terminologies.gfbio.org/terms/ets/pages/#expectedunit

gt packgae: https://gt.rstudio.com/
-->
# Status of this Docuemnt

This document describes the schema available from the APD namespace.

# Introduction
The APD is a compilation of the traits concepts used by AusTraits, a database of Australian plant traits. APD includes definitions for nearly 500 traits pertaining to plant functional ecology and plant morphology. The metadata for each trait concept has been reviewed by multiple people. Metadata includes a trait definition, excepted units and ranges (for numeric traits), allowable values (for categorical traits), keywords and trait groupings to enhance trait findability, references, and links to identical/similar traits in other trait databases. APD will be published in a machine-readable format (an owl ontology), allowing the traits to be readily re-used by other databases. This is a human-friendly output, with embedded links to the references, other trait databases and keywords/concepts borrowed from other ontologies

The APD is a community resource and we welcome any suggestions for edits, including additional key references for each trait or other trait databases for which we should add links. 

# APD Schema Overview

The following table gives an overview of the APD vocabulary. This document includes the following sections

- [Trait concepts](#trait-concepts): XXX
- [Trait groups](#trait-groupings): XXX
- [Values for categorical traits](#values-for-categorical-traits): XXXX
- [Glossary](#glossary): XXXX

# Hierachical trait groupings

XXX

# Example html table
```{r, results='asis', echo=FALSE, message=FALSE, warning=FALSE}


df <- tibble(
  country = c("UK", "US"),
  name = c("BBC", "CNN"),
  link = c("https://www.bbc.com/news", "https://edition.cnn.com/"))
  
# using html
df %>%
    mutate(
        link2 = map2(name, link, ~ make_link(.x, .y)),
        link3 = map(link2, ~ paste("A ", .x) %>% gt::html()),
        link4 = map(link2, ~ paste_html("A ", .x, "3"))
        ) -> A
  
A %>%
    gt()
```

# Trait concepts

```{r, results='asis', echo=FALSE, message=FALSE, warning=FALSE}
make_link("trait description", "http://purl.org/dc/terms/description")

for (thistrait in traits) {
  
  writeLines(paste0("\n# ", thistrait, "\n\n"))

  out <- 
    create_APD_trait_table(thistrait, triples_with_labels, categorical_values, annotation)

  out %>% 
    gt() %>% 
    cols_align(align = "left") %>%
    print()
}
```


# Values for categorical traits

# Glossary
